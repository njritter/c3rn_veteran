## Bask
bask <-
raw_data_bask %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.)) %>%
mutate(source = 'bask')
## Botanist
botanist <-
raw_data_botanist %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.)) %>%
mutate(source = 'botanist')
# Combine General, Botanist, and Bask data frames into 1 and remove blank responses
all_data <-
rbind(general, bask, botanist) %>%
filter(question > 0) %>%
mutate(question = as.numeric(question)) %>%
mutate(range = case_when(
question == 1 ~ "21 - 29",
question == 2 ~ "30 - 39",
question == 3 ~ "40 - 49",
question == 4 ~ "50 - 59",
question == 5 ~ "60 - 69",
question == 6 ~ "70+"))
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup()
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
library(tidyverse)
library(ggplot2)
source("helper.R")
library(tidyverse)
library(ggplot2)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get_single_selection(data = raw_data_general, q.name = Q29)
Q29_bask <- get_single_selection(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get_single_selection(data = raw_data_general, q.name = Q29)
Q29_bask <- get_single_selection(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get_single_selection(data = raw_data_general, q.name = Q29)
Q29_bask <- get_single_selection(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get((data = raw_data_general, q.name = Q29))
Q29_bask <- get(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get(data = raw_data_botanist, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get(data = raw_data_general, q.name = Q29)
Q29_bask <- get(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get(data = raw_data_botanist, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get(data = raw_data_general, q.name = Q29)
Q29_bask <- get(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get(data = raw_data_botanist, q.name = Q29, inherits = > -1)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get(data = raw_data_general, q.name = Q29, inherits = > -1))
Q29_bask <- get(data = raw_data_bask, q.name = Q29, inherits = > -1))
Q29_botanist <- get(data = raw_data_botanist, q.name = Q29, inherits = > -1)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get(raw_data_general, pos = column(Q29), inherits = > -1))
Q29_bask <- get(raw_data_bask, pos = column(Q29), inherits = > -1))
Q29_botanist <- get(raw_data_botanist, pos = column(Q29), inherits = > -1)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get(raw_data_general, pos = column(Q29), inherits = > 0)
Q29_bask <- get(raw_data_bask, pos = column(Q29), inherits = > 0)
Q29_botanist <- get(raw_data_botanist, pos = column(Q29), inherits = > 0)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- select(raw_data_general, pos = column(Q29), inherits = > 0)
Q29_bask <- select(raw_data_bask, pos = column(Q29), inherits = > 0)
Q29_botanist <- select.list(raw_data_botanist, pos = column(Q29), inherits = > 0)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- select(raw_data_general, column(Q29), inherits = > 0)
Q29_bask <- select(raw_data_bask, column(Q29), inherits = > 0)
Q29_botanist <- select.list(raw_data_botanist, column(Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- select(raw_data_general, column(Q29), inherits = > 0)
Q29_bask <- select(raw_data_bask, column(Q29), inherits = > 0)
Q29_botanist <- select(raw_data_botanist, column(Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- data(raw_data_general, column(Q29))
Q29_bask <- data.frame(raw_data_bask, column(Q29))
Q29_botanist <- select(raw_data_botanist, column(Q29))
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- data.frame(raw_data_general, row = Q29)
Q29_bask <- data.frame(raw_data_bask, column(Q29))
Q29_botanist <- select(raw_data_botanist, column(Q29))
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
View(Q29_general)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- data.frame(raw_data_general, row = colname(Q29))
Q29_bask <- data.frame(raw_data_bask, column(Q29))
Q29_botanist <- select(raw_data_botanist, column(Q29))
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
View(Q29_general)
# Pull out all responses for Q29 (a single selection question) and combine
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- select_all(raw_data_general, row = [], col(Q29))
Q29_bask <- data.frame(raw_data_bask, column(Q29))
Q29_botanist <- select(raw_data_botanist, column(Q29))
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist)
View(Q29_general)
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
library(tidyverse)
library(ggplot2)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..'
Q29_final_response <- "X.135"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(raw_data_general)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.135"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.148"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.148"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.149"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.148 - X.149"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- "What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_final_response <- "X.149"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..'
Q29_final_response <- "X.149"
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- colnames('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- data.matrix('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- data.matrix(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- data_frame(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..'[1, ])
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..'[ , 1])
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..'))
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..', row > 0))
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..', row = > 0))
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(condition = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select.list('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select.list('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
Q29_general <- get_choose_all(raw_data_general, q.name = Q29, f.response = Q29_final_response)
Q29_bask <- get_choose_all(raw_data_bask, q.name = Q29, f.response = Q29_final_response)
Q29_botanist <- get_choose_all(raw_data_botanist, q.name = Q29, f.response = Q29_final_response)
Q29_all <-
rbind(Q29_general, Q29_bask, Q29_botanist) %>%
tidy_choose_all()
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select.list('What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
View(Q29)
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select(column = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
View(Q29)
View(Q29)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general(select(colnames(raw_data_general, do.NULL = TRUE, prefix = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')))
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- select(raw_data_general(colnames(do.NULL = TRUE, prefix = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')))
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general %>%
select(conditon = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
library(tidyverse)
library(ggplot2)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general %>%
select(conditon = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general %>%
select(conditon = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general %>%
select(conditon = 'What.percentage.of.disability.are.you.rated..as.indicated.by.the.Veteran.s.Affairs..VA..')
row > 0
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
raw_data_general$What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA..
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 < - % > %
raw_data_general$What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA..
Q29
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- % > %
raw_data_general$What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA..
Q29
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- %>%
raw_data_general$What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA..
Q29
# Pull out all responses for Q29 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q29 <- raw_data_general$What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA..
Q29
inspect(Q29)
str(Q29)
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
library(tidyverse)
library(ggplot2)
source("helper.R")
library(tidyverse)
library(ggplot2)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
# Just Question 45
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
prescriptions_general <-
raw_data_general %>%
select(prescription = "What.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face.that.you.are.actively.trying.to.reduce.the.use.of.by.using.cannabis...Please.select.all.that.apply.",
X.227:X.249)
colnames(prescriptions_general) <- prescriptions_general[1, ]
prescriptions_general <- prescriptions_general[-1, ]
prescriptions_general <- prescriptions_general %>% mutate(source = 'general')
## Bask
prescriptions_bask <-
raw_data_bask %>%
select(prescriptions = "What.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face.that.you.are.actively.trying.to.reduce.the.use.of.by.using.cannabis...Please.select.all.that.apply.",
X.227:X.249)
colnames(prescriptions_bask) <- prescriptions_bask[1, ]
prescriptions_bask <- prescriptions_bask[-1, ]
prescriptions_bask <- prescriptions_bask %>% mutate(source = 'bask')
## Botanist
prescriptions_botanist <-
raw_data_botanist %>%
select(prescriptions = "What.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face.that.you.are.actively.trying.to.reduce.the.use.of.by.using.cannabis...Please.select.all.that.apply.",
X.227:X.249)
colnames(prescriptions_botanist) <- prescriptions_botanist[1, ]
prescriptions_botanist <- prescriptions_botanist[-1, ]
prescriptions_botanist <- prescriptions_botanist %>% mutate(source = 'botanist')
# Bind different source dataframes together and:
# - Drop Other column which contains open ended text response (deal with later)
# - Rename some columns to have shorter names
# - Convert to tidy data format for ploting
prescriptions_all <-
rbind(prescriptions_general, prescriptions_botanist, prescriptions_bask) %>%
select(-'Other (please specify)')
prescriptions_tidy <-
prescriptions_all %>%
gather(key = prescriptions, value = checked, 1:22) %>%
filter(checked >= 1)
# To save prescriptions_tidy as a .csv file, run code below
# write.csv(prescriptions_tidy, 'prescriptions_all_tidy.csv')
by_prescriptions <-
prescriptions_tidy %>%
group_by(prescriptions) %>%
summarize(count = n()) %>%
arrange(desc(count)) %>%
ungroup()
# write.csv(by_prescriptions, 'prescriptions_all.csv')
p_by_prescriptions <-
by_prescriptions %>%
ggplot(aes(x = reorder(prescriptions, count), y = count)) +
geom_bar(stat = 'identity') +
coord_flip() +
labs(x = 'prescriptions', y = 'Count')
p_by_prescriptions
# Save graph as PNG
ggsave(filename = 'Q45_Medications_Replaced_Cannabis.png', plot = p_by_prescriptions, device = 'png')
write.csv(by_prescriptions, 'prescriptions_all.csv', row.names = FALSE)
