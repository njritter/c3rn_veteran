raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
# Pull out all responses for q5 (a choose all question), combine, turn into a tidy data format for further processing then d <- tidy_choose_all(q)etermine 'question n'
q5 <- 'Which.of.the.following.symptoms.are.most.commonly.associated.with.your.primary.health.condition.or.underlying.health.conditions...Please.select.all.that.apply.'
q5_final_response <- "X.43"
q_data <- get_choose_all(raw_data, q.name = q5, f.response = q5_final_response) %>%
tidy_choose_all()
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(q_data)
plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper0.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(q_data)
plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
View(qf_all_data)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Pull out all responses for q5 (a choose all question), combine, turn into a tidy data format for further processing then d <- tidy_choose_all(q)etermine 'question n'
q <- 'Which.health.conditions.do.you.find.cannabis.to.be.helpful.in.treating...Please.select.all.that.apply.'
q_final_response <- "X.179"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
# Manipulate data into a graphable format
q_plot <-
q_data %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
View(qf_all_data)
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen.x) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
View(qf_all_data)
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen.y) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen.y, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
View(q_plot)
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(q_data$id))
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen.y) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen.y, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
# Pull out all responses for q5 (a choose all question), combine, turn into a tidy data format for further processing then d <- tidy_choose_all(q)etermine 'question n'
q <- 'Which.health.conditions.do.you.find.cannabis.to.be.helpful.in.treating...Please.select.all.that.apply.'
q_final_response <- "X.179"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(q_data$id))
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen.y) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen.y, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
#Filter out responses from non-selected IDs
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
# Manipulate data into a graphable format
q_plot <-
qf_all_data %>%
group_by(chosen.y) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(chosen.y, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_217.csv', row.names = FALSE)
write.csv(q_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_217.csv', row.names = FALSE)
write.csv(qf_all_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
# Pull out all responses for q5 (a choose all question), combine, turn into a tidy data format for further processing then d <- tidy_choose_all(q)etermine 'question n'
q <- 'Which.health.conditions.do.you.find.cannabis.to.be.helpful.in.treating...Please.select.all.that.apply.'
q_final_response <- "X.179"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_choose_all(q_data)
plot_choose_all(q_plot) +
labs(title = "Question text", subtitle = q_n)
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_choose_all(q_data)
plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
# Pull out all responses for q5 (a choose all question), combine, turn into a tidy data format for further processing then d <- tidy_choose_all(q)etermine 'question n'. If filtering skip down after this step.
q <- 'Which.health.conditions.do.you.find.cannabis.to.be.helpful.in.treating...Please.select.all.that.apply.'
q_final_response <- "X.179"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#OPTIONAL FILTERING!!!  Filter out responses from non-selected IDs. Run after step that generates q_data.
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
#OPTIONAL FILTERING!!!  Filter out responses from non-selected IDs. Run after step that generates q_data.
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
#OPTIONAL FILTERING!!!
q_plot<- clean_choose_all(qf_all_data)
plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
#OPTIONAL FILTERING!!!
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_134.csv', row.names = FALSE)
write.csv(qf_all_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
#OPTIONAL FILTERING!!!
q_plot<- clean_choose_all(qf_all_data)
plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
#OPTIONAL FILTERING!!!
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_134.csv', row.names = FALSE)
write.csv(qf_all_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
#OPTIONAL FILTERING!!!
q_plot<- clean_choose_all(qf_all_data)
plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
#OPTIONAL FILTERING!!!
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_134.csv', row.names = FALSE)
write.csv(qf_all_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
#OPTIONAL FILTERING!!!
q_plot<- clean_choose_all(qf_all_data)
r <- plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
#OPTIONAL FILTERING!!!
ggsave(filename = 'q38_conditions_cannabis.png', plot = r, device = 'png')
write.csv(q_plot, 'q38_conditions_cannabis_134.csv', row.names = FALSE)
write.csv(qf_all_data, 'q38_conditions_cannabis_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(q_data)
plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
#OPTIONAL FILTERING!!!  Filter out responses from non-selected IDs. Run after step that generates q_data.
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(qf_all_data)
r <- plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
r
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot <- clean_single_select(qf_all_data)
r <- plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
r
View(q_data)
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(q_data)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot <- clean_single_select(qf_all_data)
r <- plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
r
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot<- clean_single_select(q_data)
plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
#Filter one response
qf_data <- filter(q_data, response == "Fair")
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#OPTIONAL FILTERING!!!  Filter out responses from non-selected IDs. Run after step that generates q_data.
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
#OPTIONAL FILTERING!!!
q_plot<- clean_choose_all(qf_all_data)
r <- plot_choose_all(q_plot) +
labs(title = "Which health conditions do you find cannabis to be helpful in treating? (Please select all that apply)", subtitle = q_n)
r
View(q_data)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
q_final_response <- "X.25"
q_data <- get_choose_all(raw_data, q.name = q, f.response = q_final_response) %>%
tidy_choose_all()
q_n <- length(unique(q_data$id))
#Filter multiple responses
qf_data <- q_data %>%
filter(response %in% c("Anxiety", "Chronic Pain"))
#Filter multiple responses
qf_data <- q_data %>%
filter(c("Anxiety", "Chronic Pain"))
#Filter multiple responses
qf_data <- q_data %>%
filter("Anxiety", "Chronic Pain"))
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
#Filter one response
qf_data <- filter(q_data, chosen == "Anxiety")
q <- "How.would.you.rate.your.quality.of.health.today."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
#OPTIONAL FILTERING!!!  Filter out responses from non-selected IDs. Run after step that generates q_data.
qf_all_data <-
qf_data %>%
inner_join(q_data, by = "id")
q_n <- length(unique(qf_all_data$id))
#Pass q_data to clean_data to create q_plot. Then pass q_plot through clean_plot to produce plot.
q_plot <- clean_single_select(qf_all_data)
r <- plot_single_select(q_plot) +
labs(title = "Question Text", subtitle = q_n)
r
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
raw_data <- read.csv("data/master.csv", stringsAsFactors = FALSE)
q <- "Do.you.worry.about.your.use.of.opioids."
q_data <- get_single_selection(data = raw_data, q.name = q)
q_n <- length(unique(q_data$id))
# Manipulate data into a graphable format
q_plot <-
q_data %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_responded = round(100*(count / q_n), 2)) %>%
arrange(desc(count))
# Plot with percents and response counts
r <-
ggplot(q_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 0), count, sep = "%:"))) +
xlab("Response") +
ylab("% Responded, Count") +
labs(title = "Do you worry about your use of opioids?", subtitle = q_n)
r
