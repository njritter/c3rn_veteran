p
## Add percentages
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= count, sep = "***")))
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_responded)) +
geom_histogram(stat = 'identity') +
coord_flip() +
geom_text(aes(label= count, sep = "***")))
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_responded)) +
geom_histogram(stat = 'identity') +
coord_flip +
geom_text(aes(label= count, sep = "***")))
## Add percentages and count
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_responded)) +
geom_histogram(stat = 'identity') +
geom_text(aes(label= count, sep = "***")))
View(q)
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
general <-
raw_data_general %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Bask
bask <-
raw_data_bask %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Botanist
botanist <-
raw_data_botanist %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
general <-
raw_data_general %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Bask
bask <-
raw_data_bask %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Botanist
botanist <-
raw_data_botanist %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
# Combine General, Botanist, and Bask data frames into 1 and remove blank responses
all_data <-
rbind(general, bask, botanist) %>%
filter(question > 0) %>%
mutate(question = as.numeric(question)) %>%
mutate(range = case_when(
question == 1 ~ "21 - 29",
question == 2 ~ "30 - 39",
question == 3 ~ "40 - 49",
question == 4 ~ "50 - 59",
question == 5 ~ "60 - 69",
question == 6 ~ "70+"))
## Add # Responses
number_of_people_who_submitted_response_to_Q88 <- length(unique(all_data$id))
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_histogram(stat = 'identity')
p
q <-
ggplot(Q68_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
View(for_plot)
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(Q68_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_histogram(stat = 'identity')
p
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = reorder(range, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = (range, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = reorder(count, range), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = reorder(range), y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_histogram(stat = 'identity')
p
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_histogram(stat = 'bins')
p
p <-
ggplot(for_plot, aes(x = range, y = count)) +
p
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_histogram(stat = 'identity')
p
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
p
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(percent_all,2)))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(percent_all,2)))
q
View(p)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
general <-
raw_data_general %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Bask
bask <-
raw_data_bask %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Botanist
botanist <-
raw_data_botanist %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
general <-
raw_data_general %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Bask
bask <-
raw_data_bask %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
## Botanist
botanist <-
raw_data_botanist %>%
select(question = "What.is.your.age..in.years..") %>%
slice(2:nrow(.))
# Combine General, Botanist, and Bask data frames into 1 and remove blank responses
all_data <-
rbind(general, bask, botanist) %>%
filter(question > 0) %>%
mutate(question = as.numeric(question)) %>%
mutate(range = case_when(
question == 1 ~ "21 - 29",
question == 2 ~ "30 - 39",
question == 3 ~ "40 - 49",
question == 4 ~ "50 - 59",
question == 5 ~ "60 - 69",
question == 6 ~ "70+"))
## Add # Responses
number_of_people_who_submitted_response_to_Q88 <- length(unique(all_data$id))
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
q <-
ggplot(for_plot, aes(x = range, y = percent_all)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(percent_all,2)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(count,2)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(count, percent_responded)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(count, percent_responded)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(count, 2)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= (count)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= (count, percent_responded)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= (count)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= (count)))
q
ggsave(filename = 'Q88_Age_Count.png', plot = r, device = 'png')
ggsave(filename = 'Q88_Age_Count.png', plot = q, device = 'png')
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= (percent_responded)))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = paste(round(percent_responded, 2))))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = percent_responded, 2))))
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = (round(percent_responded, 2))))
q
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
p <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity')
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
p
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = (count)
q
ggsave(filename = 'Q88_Age_%_Respondes.png', plot = q, device = 'png')
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label = count)
q
q <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= round(percent_all,2)))
q
ggsave(filename = 'Q88_Age_%_Responses.png', plot = q, device = 'png')
ggsave(filename = 'Q88_Age_Responses.png', plot = q, device = 'png')
write.csv(Q68_plot, 'Q88_Age.csv', row.names = FALSE)
write.csv(for_plot, 'Q88_Age.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q45 (a choose all question), combine, and turn
# into a tidy data format for further processing
# Notes
# - Not including X.249 (Other) and X.248 (Have reduced use in past)
Q45 <- 'What.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face.that.you.are.actively.trying.to.reduce.the.use.of.by.using.cannabis...Please.select.all.that.apply.'
Q45_final_response <- "X.249"
Q45_general <- get_choose_all(raw_data_general, q.name = Q45, f.response = Q45_final_response)
Q45_bask <- get_choose_all(raw_data_bask, q.name = Q45, f.response = Q45_final_response)
Q45_botanist <- get_choose_all(raw_data_botanist, q.name = Q45, f.response = Q45_final_response)
Q45_all <-
rbind(Q45_general, Q45_bask, Q45_botanist) %>%
tidy_choose_all()
number_of_people_who_submitted_response_to_Q45 <- length(unique(Q45_all$id))
number_of_people_who_use_cannabis_to_reduce_prescription_use <-
length(unique(Q45_all$id))
for_plot <-
Q45_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people_who_use_cannabis_to_reduce_prescription_use)
p <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = count)) +
geom_bar(stat = 'identity') +
coord_flip()
p
q <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_all)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_all,2)))
q
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= round(percent_responded,2)))
r
