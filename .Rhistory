q43_n <- length(unique(q43_all$id))
# Plot with percents and response counts
r <-
ggplot(q43_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Manipulate data into a graphable format
q43_plot <-
q43_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q43_n)
# Plot with percents and response counts
r <-
ggplot(q43_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q43_cannabis_daily_qol.png', plot = r, device = 'png')
write.csv(q43_plot, 'q43_cannabis_daily_qol_430.csv', row.names = FALSE)
write.csv(q43_all, 'q43_cannabis_daily_qol_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
q98_n <- length(unique(q98_all$id))
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
q98_n <- length(unique(q98_all$id))
# Pull out all responses for q21 (a single selection question) combine, then determine 'question n'
q21 <- "How.many.total.prescription.medications.are.you.currently.taking...Please.insert.number."
q21_general <- get_single_selection(data = raw_data_general, q.name = q21)
q21_bask <- get_single_selection(data = raw_data_bask, q.name = q21)
q21_botanist <- get_single_selection(data = raw_data_botanist, q.name = q21)
q21_hr <- get_single_selection(raw_data_hr, q.name = q21)
q21_all <- rbind(q21_general, q21_bask, q21_botanist, q21_hr) %>%
inner_join(ma_ids, by = "id")
q21_ma_n <- length(unique(q21_all$id))
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
q98_n <- length(unique(q98_all$id))
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
ma_ids <- q98_all %>%
filter(response %in% c("Massachusetts"))
state_ma <- length(unique(ma_ids$id))
# Pull out all responses for q21 (a single selection question) combine, then determine 'question n'
q21 <- "How.many.total.prescription.medications.are.you.currently.taking...Please.insert.number."
q21_general <- get_single_selection(data = raw_data_general, q.name = q21)
q21_bask <- get_single_selection(data = raw_data_bask, q.name = q21)
q21_botanist <- get_single_selection(data = raw_data_botanist, q.name = q21)
q21_hr <- get_single_selection(raw_data_hr, q.name = q21)
q21_all <- rbind(q21_general, q21_bask, q21_botanist, q21_hr) %>%
inner_join(ma_ids, by = "id")
q21_ma_n <- length(unique(q21_all$id))
# Manipulate data into a graphable format
q21_plot <-
q21_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q21_ma_n)
# Manipulate data into a graphable format
q21_plot <-
q21_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q21_ma_n)
# Plot with percents and response counts
r <-
ggplot(q21_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q21_total_prescriptions.png', plot = r, device = 'png')
write.csv(q21_plot, 'q21_total_prescriptions_132.csv', row.names = FALSE)
write.csv(q21_all, 'q21_total_prescriptions_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
ma_ids <- q98_all %>%
filter(response %in% c("Massachusetts"))
state_ma <- length(unique(ma_ids$id))
# Pull out all responses for q22 (a single selection question) combine, then determine 'question n'
q22 <- "Do.you.have.prescription.medications.in.your.house.that.you.don.t.want.to.use.and.currently.need.to.get.rid.of."
q22_general <- get_single_selection(data = raw_data_general, q.name = q22)
q22_bask <- get_single_selection(data = raw_data_bask, q.name = q22)
q22_botanist <- get_single_selection(data = raw_data_botanist, q.name = q22)
q22_hr <- get_single_selection(raw_data_hr, q.name = q22)
q22_all <- rbind(q22_general, q22_bask, q22_botanist, q22_hr) %>%
inner_join(ma_ids, by = "id")
q22_m_n <- length(unique(q22_all$id))
# Manipulate data into a graphable format
q22_plot <-
q22_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q22_m_n)
# Manipulate data into a graphable format
q22_plot <-
q22_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q22_m_n)
# Plot with percents and response counts
r <-
ggplot(q22_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q22_unwanted_medication.png', plot = r, device = 'png')
write.csv(q22_plot, 'q22_unwanted_medication_161.csv', row.names = FALSE)
write.csv(q22_all, 'q22_unwanted_medication_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Pull out all responses for q23 (a single selection question) combine, then determine 'question n'
q23 <- "Have.you.ever.been.diagnosed.with.Opioid.Use.Disorder..OUD.."
q23_general <- get_single_selection(data = raw_data_general, q.name = q23)
q23_bask <- get_single_selection(data = raw_data_bask, q.name = q23)
q23_botanist <- get_single_selection(data = raw_data_botanist, q.name = q23)
q23_hr <- get_single_selection(data = raw_data_hr, q.name = q23)
q23_all <- rbind(q23_general, q23_bask, q23_botanist, q23_hr) %>%
inner_join(ma_ids, by = "id")
q23_m_n <- length(unique(q23_all$id))
# Manipulate data into a graphable format
q23_plot <-
q23_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q23_m_n)
# Manipulate data into a graphable format
q23_plot <-
q23_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q23_m_n)
# Plot with percents and response counts
r <-
ggplot(q23_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q23_diagnosed_oud.png', plot = r, device = 'png')
write.csv(q23_plot, 'q23_diagnosed_oud_161.csv', row.names = FALSE)
write.csv(q23_all, 'q23_diagnosed_oud_ids.csv', row.names = FALSE)
# Pull out all responses for q24 (a single selection question) combine, then determine 'question n'
q24 <- "What.types.of.treatments.are.you.currently.receiving.for.your.OUD."
q24_general <- get_single_selection(data = raw_data_general, q.name = q24)
q24_bask <- get_single_selection(data = raw_data_bask, q.name = q24)
q24_botanist <- get_single_selection(data = raw_data_botanist, q.name = q24)
q24_hr <- get_single_selection(data = raw_data_hr, q.name = q24)
q24_all <- rbind(q24_general, q24_bask, q24_botanist, q24_hr) %>%
inner_join(ma_ids, by = "id")
q24_m_n <- length(unique(q24_all$id))
# Manipulate data into a graphable format
q24_plot <-
q24_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q24_m_n)
# Manipulate data into a graphable format
q24_plot <-
q24_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q24_m_n)
# Plot with percents and response counts
r <-
ggplot(q24_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q24_oud_treatment.png', plot = r, device = 'png')
write.csv(q24_plot, 'q24_oud_treatment_3.csv', row.names = FALSE)
write.csv(q24_all, 'q24_oud_treatment_ids.csv', row.names = FALSE)
# Pull out all responses for q25 (a single selection question) combine, then determine 'question n'
q25 <- "Have.you.ever.been.tested.for.THC..marijuana..during.your.opioid.recovery.treatment."
q25_general <- get_single_selection(data = raw_data_general, q.name = q25)
q25_bask <- get_single_selection(data = raw_data_bask, q.name = q25)
q25_botanist <- get_single_selection(data = raw_data_botanist, q.name = q25)
q25_hr <- get_single_selection(data = raw_data_hr, q.name = q25)
q25_all <- rbind(q25_general, q25_bask, q25_botanist, q25_hr) %>%
inner_join(ma_ids, by = "id")
q25_m_n <- length(unique(q25_all$id))
# Manipulate data into a graphable format
q25_plot <-
q25_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q25_m_n)
# Manipulate data into a graphable format
q25_plot <-
q25_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q25_m_n)
# Plot with percents and response counts
r <-
ggplot(q25_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q25_thc_test_oud.png', plot = r, device = 'png')
write.csv(q25_plot, 'q25_thc_test_oud_3.csv', row.names = FALSE)
write.csv(q25_all, 'q25_thc_test_oud_ids.csv', row.names = FALSE)
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q25_oud_thc_oud.png', plot = r, device = 'png')
write.csv(q25_plot, 'q25_oud_thc_test_3.csv', row.names = FALSE)
write.csv(q25_all, 'q25_oud_thc_test_ids.csv', row.names = FALSE)
# Pull out all responses for q26 (a choose all question), combine, turn into a tidy data format for further processing then determine 'question n'
q26 <- 'Have.you.ever.taken.any.of.the.following.opioids...Please.select.all.that.apply.'
q26_final_response <- "X.148"
q26_general <- get_choose_all(raw_data_general, q.name = q26, f.response = q26_final_response)
q26_bask <- get_choose_all(raw_data_bask, q.name = q26, f.response = q26_final_response)
q26_botanist <- get_choose_all(raw_data_botanist, q.name = q26, f.response = q26_final_response)
q26_hr <- get_single_selection(data = raw_data_hr, q.name = q26)
q26_all <-
rbind(q26_general, q26_bask, q26_botanist, q26_hr) %>%
tidy_choose_all() %>%
inner_join(ma_ids, by = "id")
q26_m_n <- length(unique(q26_all$id))
# Manipulate data into a graphable format
q26_plot <-
q26_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q26_m_n)
# Plot with percents and response counts
r <-
ggplot(q26_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q26_opioids_taken.png', plot = r, device = 'png')
write.csv(q26_plot, 'q26_opioids_taken_3.csv', row.names = FALSE)
write.csv(q26_all, 'q26_opioids_taken_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q27 (a single selection question) combine, then determine 'question n'
q27 <- "Do.you.worry.about.your.use.of.opioids."
q27_general <- get_single_selection(data = raw_data_general, q.name = q27)
q27_bask <- get_single_selection(data = raw_data_bask, q.name = q27)
q27_botanist <- get_single_selection(data = raw_data_botanist, q.name = q27)
q27_hr <- get_single_selection(data = raw_data_hr, q.name = q27)
q27_all <- rbind(q27_general, q27_bask, q27_botanist, q27_hr) %>%
inner_join(ma_ids, by = "id")
q27_m_n <- length(unique(q27_all$id))
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
ma_ids <- q98_all %>%
filter(response %in% c("Massachusetts"))
state_ma <- length(unique(ma_ids$id))
# Pull out all responses for q27 (a single selection question) combine, then determine 'question n'
q27 <- "Do.you.worry.about.your.use.of.opioids."
q27_general <- get_single_selection(data = raw_data_general, q.name = q27)
q27_bask <- get_single_selection(data = raw_data_bask, q.name = q27)
q27_botanist <- get_single_selection(data = raw_data_botanist, q.name = q27)
q27_hr <- get_single_selection(data = raw_data_hr, q.name = q27)
q27_all <- rbind(q27_general, q27_bask, q27_botanist, q27_hr) %>%
inner_join(ma_ids, by = "id")
q27_m_n <- length(unique(q27_all$id))
# Manipulate data into a graphable format
q27_plot <-
q27_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q27_m_n)
# Plot with percents and response counts
r <-
ggplot(q27_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q27_opioid_use_worry.png', plot = r, device = 'png')
write.csv(q27_plot, 'q27_opioid_use_worry_3.csv', row.names = FALSE)
write.csv(q27_all, 'q27_opioid_use_worry_ids.csv', row.names = FALSE)
# Pull out all responses for q28 (a single selection question) combine, then determine 'question n'
q28 <- "Do.you.find.it.difficult.to.stop.or.not.use.opioids."
q28_general <- get_single_selection(data = raw_data_general, q.name = q28)
q28_bask <- get_single_selection(data = raw_data_bask, q.name = q28)
q28_botanist <- get_single_selection(data = raw_data_botanist, q.name = q28)
q28_hr <- get_single_selection(data = raw_data_hr, q.name = q28)
q28_all <- rbind(q28_general, q28_bask, q28_botanist, q28_hr) %>%
inner_join(ma_ids, by = "id")
q28_m_n <- length(unique(q28_all$id))
# Manipulate data into a graphable format
q28_plot <-
q28_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q28_m_n)
# Plot with percents and response counts
r <-
ggplot(q28_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q28_opioid_cessation.png', plot = r, device = 'png')
write.csv(q28_plot, 'q28_opioid_cessation_3.csv', row.names = FALSE)
write.csv(q28_all, 'q28_opioid_cessation_ids.csv', row.names = FALSE)
# Pull out all responses for Q29 (a single selection question) combine, then determine 'question n'
Q29 <- "What.percentage.of.disability.are.you.rated..as.is.indicated.by.the.Veteran.s.Affairs..VA.."
Q29_general <- get_single_selection(data = raw_data_general, q.name = Q29)
Q29_bask <- get_single_selection(data = raw_data_bask, q.name = Q29)
Q29_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q29)
Q29_hr <- get_single_selection(data = raw_data_hr, q.name = Q29)
Q29_all <- rbind(Q29_general, Q29_bask, Q29_botanist, Q29_hr) %>%
inner_join(ma_ids, by = "id")
q29_m_n <- length(unique(Q29_all$id))
histogram_object <- hist(as.numeric(Q29_all$response))
ggsave(plot(histogram_object), file = "Q29_Percentage_Disability.png")
write.csv(Q29_all, 'Q29_Percentage_Disability_127.csv', row.names = FALSE)
# Pull out all responses for Q30 (a single selection question), combine, then determine 'question n'
Q30 <- "Do.you.currently.have.health.insurance...Please.select.one."
Q30_general <- get_single_selection(data = raw_data_general, q.name = Q30)
Q30_bask <- get_single_selection(data = raw_data_bask, q.name = Q30)
Q30_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q30)
Q30_hr <- get_single_selection(data = raw_data_hr, q.name = Q30)
Q30_all <- rbind(Q30_general, Q30_bask, Q30_botanist, Q30_hr) %>%
inner_join(ma_ids, by = "id")
q30_m_n <- length(unique(Q30_all$id))
# Manipulate data into a graphable format
Q30_plot <-
Q30_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q30_m_n)
# Plot with percents and response counts
r <-
ggplot(Q30_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q30_health_insurance.png', plot = r, device = 'png')
write.csv(Q30_plot, 'q30_health_insurance_161.csv', row.names = FALSE)
write.csv(Q30_all, 'q30_health_insurance_ids.csv', row.names = FALSE)
# Pull out all responses for Q31 (a single selection question) combine, then determine 'question n'
Q31 <- "Do.you.have.prescription.drug.coverage."
Q31_general <- get_single_selection(data = raw_data_general, q.name = Q31)
Q31_bask <- get_single_selection(data = raw_data_bask, q.name = Q31)
Q31_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q31)
Q31_hr <- get_single_selection(data = raw_data_hr, q.name = Q31)
Q31_all <- rbind(Q31_general, Q31_bask, Q31_botanist, Q31_hr) %>%
inner_join(ma_ids, by = "id")
q31_m_n <- length(unique(Q31_all$id))
# Manipulate data into a graphable format
Q31_plot <-
Q31_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q31_m_n)
# Plot with percents and response counts
r <-
ggplot(Q31_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q31_drug_coverage.png', plot = r, device = 'png')
write.csv(Q31_plot, 'q31_drug_coverage_161.csv', row.names = FALSE)
write.csv(Q31_all, 'q31_drug_coverage_ids.csv', row.names = FALSE)
# Pull out all responses for q32 (a single selection question) combine, then determine 'question n'
q32 <- "Where.how.do.you.get.your.medications."
q32_general <- get_single_selection(data = raw_data_general, q.name = q32)
q32_bask <- get_single_selection(data = raw_data_bask, q.name = q32)
q32_botanist <- get_single_selection(data = raw_data_botanist, q.name = q32)
q32_hr <- get_single_selection(data = raw_data_hr, q.name = q32)
q32_all <- rbind(q32_general, q32_bask, q32_botanist, q32_hr) %>%
inner_join(ma_ids, by = "id")
q32_m_n <- length(unique(q32_all$id))
# Manipulate data into a graphable format
q32_plot <-
q32_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q32_m_n)
# Plot with percents and response counts
r <-
ggplot(q32_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'vet_q32_medication_sourcing.png', plot = r, device = 'png')
write.csv(q32_plot, 'vet_q32_medication_sourcing_161.csv', row.names = FALSE)
write.csv(q32_all, 'vet_q32_medication_sourcing_ids.csv', row.names = FALSE)
