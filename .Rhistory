raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q64 (a single selection question), combine, then determine 'question n'
Q64 <- "In.an.average.week..how.often.do.you.use.salves.topicals..e.g..creams..lotions..sprays..etc..."
Q64_general <- get_single_selection(data = raw_data_general, q.name = Q64)
Q64_bask <- get_single_selection(data = raw_data_bask, q.name = Q64)
Q64_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q64)
Q64_hr <- get_single_selection(data = raw_data_hr, q.name = Q64)
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q64 (a single selection question), combine, then determine 'question n'
Q64 <- "In.an.average.week..how.often.do.you.use.salves.topicals..e.g..creams..lotions..sprays..etc..."
Q64_general <- get_single_selection(data = raw_data_general, q.name = Q64)
Q64_bask <- get_single_selection(data = raw_data_bask, q.name = Q64)
Q64_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q64)
Q64_hr <- get_single_selection(data = raw_data_hr, q.name = Q64)
Q64_all <- rbind(Q64_general, Q64_bask, Q64_botanist, Q64_hr)
number_of_people <- length(unique(Q64_all$id))
# Pull out all responses for Q64 (a single selection question), combine, then determine 'question n'
Q64 <- "In.an.average.week..how.often.do.you.use.salves.topicals..e.g..creams..lotions..sprays..etc..."
Q64_general <- get_single_selection(data = raw_data_general, q.name = Q64)
Q64_bask <- get_single_selection(data = raw_data_bask, q.name = Q64)
Q64_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q64)
Q64_hr <- get_single_selection(data = raw_data_hr, q.name = Q64)
Q64_all <- rbind(Q64_general, Q64_bask, Q64_botanist, Q64_hr)
number_of_people <- length(unique(Q64_all$id))
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q64 (a single selection question), combine, then determine 'question n'
Q64 <- "In.an.average.week..how.often.do.you.use.salves.topicals..e.g..creams..lotions..sprays..etc..."
Q64_general <- get_single_selection(data = raw_data_general, q.name = Q64)
Q64_bask <- get_single_selection(data = raw_data_bask, q.name = Q64)
Q64_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q64)
Q64_hr <- get_single_selection(data = raw_data_hr, q.name = Q64)
Q64_all <- rbind(Q64_general, Q64_bask, Q64_botanist, Q64_hr)
number_of_people <- length(unique(Q64_all$id))
# Manipulate data into a graphable format
Q64_plot <-
Q64_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(Q64_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Pull out all responses for Q65 (a single selection question), combine, then determine 'question n'
Q65 <- "How.many.milliliters..mL..of.tincture.are.you.using.per.week..Note..30mL...1oz"
Q65_general <- get_single_selection(data = raw_data_general, q.name = Q65)
Q65_bask <- get_single_selection(data = raw_data_bask, q.name = Q65)
Q65_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q65)
Q65_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q65)
# Pull out all responses for Q65 (a single selection question), combine, then determine 'question n'
Q65 <- "How.many.milliliters..mL..of.tincture.are.you.using.per.week..Note..30mL...1oz"
Q65_general <- get_single_selection(data = raw_data_general, q.name = Q65)
Q65_bask <- get_single_selection(data = raw_data_bask, q.name = Q65)
Q65_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q65)
Q65_hr <- get_single_selection(data = raw_data_hr, q.name = Q65)
Q65_all <- rbind(Q65_general, Q65_bask, Q65_botanist, Q65_hr)
number_of_people <- length(unique(Q65_all$id))
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q66 (a single selection question) combine, then determine 'question n'
Q66 <- "Does.yourÂ.VA.doctor.or.clinical.care.provider.know.about.your.medical.cannabis.use."
Q66_general <- get_single_selection(data = raw_data_general, q.name = Q66)
Q66_bask <- get_single_selection(data = raw_data_bask, q.name = Q66)
Q66_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q66)
Q66_hr <- get_single_selection(data = raw_data_hr, q.name = Q66)
Q66_all <- rbind(Q66_general, Q66_bask, Q66_botanist, Q66_hr)
number_of_people <- length(unique(Q66_all$id))
# Manipulate data into a graphable format
Q66_plot <-
Q66_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(Q66_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q66_va_cannabis_use_knowledge.png', plot = r, device = 'png')
write.csv(Q66_plot, 'q66_va_cannabis_use_knowledge_521.csv', row.names = FALSE)
write.csv(Q66_all, 'q66_va_cannabis_use_knowledge_ids.csv', row.names = FALSE)
# Pull out all responses for q6 (a single selection question) combine, then determine 'question n'
q67 <- "Which.VA.do.you.go.to."
q67_general <- get_single_selection(data = raw_data_general, q.name = q67)
q67_bask <- get_single_selection(data = raw_data_bask, q.name = q67)
q67_botanist <- get_single_selection(data = raw_data_botanist, q.name = q67)
q67_hr <- get_single_selection(data = raw_data_hr, q.name = q67)
q67_all <- rbind(q67_general, q67_bask, q67_botanist, q67_hr)
number_of_people <- length(unique(q67_all$id))
ggsave(q67_all, file = "q67_VA_Location.png")
write.csv(q67_all, 'q67_VA_Location.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q68 (a single selection question) combine, then determine 'question n'
q68 <- "Does.your.VA.doctor.or.clinician.supportÂ.yourÂ.cannabis.use."
q68_general <- get_single_selection(data = raw_data_general, q.name = q68)
q68_bask <- get_single_selection(data = raw_data_bask, q.name = q68)
q68_botanist <- get_single_selection(data = raw_data_botanist, q.name = q68)
q68_hr <- get_single_selection(data = raw_data_hr, q.name = q68)
q68_all <- rbind(q68_general, q68_bask, q68_botanist, q68_hr)
number_of_people <- length(unique(q68_all$id))
# Manipulate data into a graphable format
q68_plot <-
q68_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Add percents and response counts
r <-
ggplot(q68_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q68_va_cannabis_use_support.png', plot = r, device = 'png')
write.csv(q68_plot, 'q68_va_cannabis_use_support_521.csv', row.names = FALSE)
write.csv(q68_all, 'q68_va_cannabis_use_support_info.csv', row.names = FALSE)
# Pull out all responses for q69 (a single selection question), combine, then determine 'question n'
q69 <- "How.satisfied.are.you.with.the.VA.in.managing.your.health.condition."
q69_general <- get_single_selection(data = raw_data_general, q.name = q69)
q69_bask <- get_single_selection(data = raw_data_bask, q.name = q69)
q69_botanist <- get_single_selection(data = raw_data_botanist, q.name = q69)
q69_hr <- get_single_selection(data = raw_data_hr, q.name = q69)
q69_all <- rbind(q69_general, q69_bask, q69_botanist, q69_hr)
number_of_people <- length(unique(q69_all$id))
# Manipulate data into a graphable format
q69_plot <-
q69_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q69_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q69_highest_pain.png', plot = r, device = 'png')
write.csv(q69_plot, 'q69_highest_pain_521.csv', row.names = FALSE)
write.csv(q69_all, 'q69_highest_pain_ids.csv', row.names = FALSE)
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q69_va_satisfaction.png', plot = r, device = 'png')
write.csv(q69_plot, 'q69_va_satisfaction_521.csv', row.names = FALSE)
write.csv(q69_all, 'q69_va_satisfaction_ids.csv', row.names = FALSE)
# Pull out all responses for q70 (a choose all question), combine, turn into a tidy data format for further processing then determine 'question n'
q70 <- "Where.do.you.get.your.information.to.make.informed.decisions.about.cannabis.products...Please.select.all.that.apply."
q70_general_f <- "X.322"
q70_botanist_f <- "X.2721"
q70_bask_f <- "X.1561"
q70_hr_f <- "X.894"
q70_general <- get_choose_all(raw_data_general, q.name = q70, f.response = q70_general_f)
q70_bask <- get_choose_all(raw_data_bask, q.name = q70, f.response = q70_bask_f)
q70_botanist <- get_choose_all(raw_data_botanist, q.name = q70, f.response = q70_botanist_f)
q70_hr <- get_choose_all(raw_data_hr, q.name = q70, f.response = q70_hr_f)
q70_all <- rbind(q70_general, q70_bask, q70_botanist, q70_hr) %>%
tidy_choose_all()
number_of_people <- length(unique(q70_all$id))
# Manipulate data into a graphable format
q70_plot <-
q70_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q70_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q70_cannabis_info.png', plot = r, device = 'png')
W
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q70_cannabis_info.png', plot = r, device = 'png')
write.csv(q70_plot, 'q70_cannabis_info_521.csv', row.names = FALSE)
write.csv(q70_all, 'q70_cannabis_info_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q75 (a single selection question), combine, then determine 'question n'
q75 <- "Which.branch.of.the.armed.services.did.you.serve.in...Please.select.all.that.apply."
q75_general <- get_single_selection(data = raw_data_general, q.name = q75)
q75_bask <- get_single_selection(data = raw_data_bask, q.name = q75)
q75_botanist <- get_single_selection(data = raw_data_botanist, q.name = q75)
q75_hr <- get_single_selection(data = raw_data_hr, q.name = q75)
q75_all <- rbind(q75_general, q75_bask, q75_botanist, q75_hr)
number_of_people <- length(unique(q75_all$id))
# Manipulate data into a graphable format
q75_plot <-
q75_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q75_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Pull out all responses for q77 (a choose all question), combine, turn into a tidy data format for further processing then determine 'question n'
q77 <- "What.war.s..did.you.serve.in...Please.select.all.that.apply."
q77_general_final_response <- "X.373"
q77_bask_final_response <- "X.1612"
q77_botanist_final_response <- "X.2772"
q77_hr_final_response <- "X.945"
q77_general <- get_choose_all(raw_data_general, q.name = q77, f.response = q77_general_final_response)
q77_bask <- get_choose_all(raw_data_bask, q.name = q77, f.response = q77_bask_final_response)
q77_botanist <- get_choose_all(raw_data_botanist, q.name = q77, f.response = q77_botanist_final_response)
q77_hr <- get_choose_all(data = raw_data_hr, q.name = q77, f.response = q77_hr_final_response)
q77_all <-
rbind(q77_general, q77_bask, q77_botanist, q77_hr) %>%
tidy_choose_all()
q77_n <- length(unique(q77_all$id))
# Pull out all responses for q77 (a choose all question), combine, turn into a tidy data format for further processing then determine 'question n'
q77 <- "What.war.s..did.you.serve.in...Please.select.all.that.apply."
q77_general_final_response <- "X.373"
q77_bask_final_response <- "X.1612"
q77_botanist_final_response <- "X.2772"
q77_hr_final_response <- "X.945"
q77_general <- get_choose_all(raw_data_general, q.name = q77, f.response = q77_general_final_response)
q77_bask <- get_choose_all(raw_data_bask, q.name = q77, f.response = q77_bask_final_response)
q77_botanist <- get_choose_all(raw_data_botanist, q.name = q77, f.response = q77_botanist_final_response)
q77_hr <- get_choose_all(data = raw_data_hr, q.name = q77, f.response = q77_hr_final_response)
q77_all <-
rbind(q77_general, q77_bask, q77_botanist, q77_hr) %>%
tidy_choose_all()
q77_n <- length(unique(q77_all$id))
# Manipulate data into a graphable format
q77_plot <-
q77_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q77_n)
# Plot with percents and response counts
r <-
ggplot(q77_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q77_wars_served.png', plot = r, device = 'png')
write.csv(q77_plot, 'q77_wars_served_562.csv', row.names = FALSE)
write.csv(q77_all, 'q77_wars_served_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q88 (a single selection question), combine, then determine 'question n'
q88 <- "What.is.your.age..in.years.."
q88_general <- get_single_selection(data = raw_data_general, q.name = q88)
q88_bask <- get_single_selection(data = raw_data_bask, q.name = q88)
q88_botanist <- get_single_selection(data = raw_data_botanist, q.name = q88)
q88_hr <- get_single_selection(data = raw_data_hr, q.name = q88)
q88_all <- rbind(q88_general, q88_bask, q88_botanist, q88_hr)
number_of_people <- length(unique(q88_all$id))
# Pull out all responses for q88 (a single selection question), combine, then determine 'question n'
q88 <- "What.is.your.age..in.years.."
q88_general <- get_single_selection(data = raw_data_general, q.name = q88)
q88_bask <- get_single_selection(data = raw_data_bask, q.name = q88)
q88_botanist <- get_single_selection(data = raw_data_botanist, q.name = q88)
q88_hr <- get_single_selection(data = raw_data_hr, q.name = q88)
q88_all <- rbind(q88_general, q88_bask, q88_botanist, q88_hr)
number_of_people <- length(unique(q88_all$id))
test <-
q88_all %>%
inner_join(ma_ids, by = "id")
# Manipulate data into a graphable format
q88_plot <-
q88_all %>%
group_by(response, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
# Plot with percents and response counts
r <-
ggplot(q88_plot, aes(x = response, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q88_age.png', plot = r, device = 'png')
write.csv(q88_plot, 'q88_age_565.csv', row.names = FALSE)
write.csv(q88_all, 'q88_age_ids.csv', row.names = FALSE)
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q89 (a single selection question) combine, then determine 'question n'
q89 <- "To.which.gender.do.you.most.identify."
q89_general <- get_single_selection(data = raw_data_general, q.name = q89)
q89_bask <- get_single_selection(data = raw_data_bask, q.name = q89)
q89_botanist <- get_single_selection(data = raw_data_botanist, q.name = q89)
q89_hr <- get_single_selection(data = raw_data_hr, q.name = q89)
q89_all <- rbind(q89_general, q89_bask, q89_botanist, q89_hr)
number_of_people <- length(unique(q89_all$id))
# Manipulate data into a graphable format
q89_plot <-
q89_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q89_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q89_gender.png', plot = r, device = 'png')
write.csv(q89_plot, 'q89_gender_565.csv', row.names = FALSE)
write.csv(q89_all, 'q89_gender_ids.csv', row.names = FALSE)
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
ma_ids <- q98_all %>%
filter(response %in% c("Massachusetts"))
state_ma <- length(unique(ma_ids$id))
# Load libraries
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data from the Veterans surveys. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_hr <- read.csv("data/hr.csv", stringsAsFactors = FALSE)
# Pull out all responses for q93 (a single selection question) combine, then determine 'question n'
q93 <- "What.is.your.current.employment.status."
q93_general <- get_single_selection(data = raw_data_general, q.name = q93)
q93_bask <- get_single_selection(data = raw_data_bask, q.name = q93)
q93_botanist <- get_single_selection(data = raw_data_botanist, q.name = q93)
q93_hr <- get_single_selection(data = raw_data_hr, q.name = q93)
q93_all <- rbind(q93_general, q93_bask, q93_botanist, q93_hr)
q93_n <- length(unique(q93_all$id))
# Manipulate data into a graphable format
q93_plot <-
q93_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q93_n)
# Plot with percents and response counts
r <-
ggplot(q93_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q93_employment_status.png', plot = r, device = 'png')
write.csv(q93_plot, 'q93_employment_status_565.csv', row.names = FALSE)
write.csv(q93_all, 'q93_employment_status_ids.csv', row.names = FALSE)
# Pull out all responses for q96 (a single selection question) combine, then determine 'question n'
q96 <- "Which.of.the.following.best.represents.your.ethnic.heritage."
q96_general <- get_single_selection(data = raw_data_general, q.name = q96)
q96_bask <- get_single_selection(data = raw_data_bask, q.name = q96)
q96_botanist <- get_single_selection(data = raw_data_botanist, q.name = q96)
q96_hr <- get_single_selection(data = raw_data_hr, q.name = q96)
q96_all <- rbind(q96_general, q96_bask, q96_botanist, q96_hr)
number_of_people <- length(unique(q96_all$id))
# Manipulate data into a graphable format
q96_plot <-
q96_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q96_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q96_race.png', plot = r, device = 'png')
write.csv(q96_plot, 'q96_race_565.csv', row.names = FALSE)
write.csv(q96_all, 'q96_race_ids.csv', row.names = FALSE)
# Pull out all responses for q98 (a single selection question) combine, then determine 'question n' (subsequent q are labeled for convenience, do not respond to survey q#)
q98 <- "What.state.in.the.US.do.you.currently.live.in."
q99 <- "What.US.State.do.you.currently.live.in."
q100 <- "Which.US.state.do.you.currently.live.in."
q101 <- "What.US.state.do.you.currently.live.in."
q98_general <- get_single_selection(data = raw_data_general, q.name = q98)
q98_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q98_botanist <- get_single_selection(data = raw_data_botanist, q.name = q100)
q98_hr <- get_single_selection(data = raw_data_hr, q.name = q101)
q98_all <- rbind(q98_general, q98_bask, q98_botanist, q98_hr)
q98_n <- length(unique(q98_all$id))
ma_ids <- q98_all %>%
filter(response %in% c("Massachusetts"))
state_ma <- length(unique(ma_ids$id))
# Manipulate data into a graphable format
q98_plot <-
q98_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(q98_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
# Save graph as PNG, plot data as csv, and all question data including response IDs as csv (save question n and N at end of plot file as "_x.x")
ggsave(filename = 'q98_state.png', plot = r, device = 'png')
write.csv(q98_plot, 'q98_state_531.csv', row.names = FALSE)
write.csv(q98_all, 'q98_state_ids.csv', row.names = FALSE)
# Pull out all responses for q99 (a single selection question) combine, then determine 'question n'
q99 <- "I.would.choose.medical.cannabis.if.it.was.a.federally.legal.treatment.option."
q99_general <- get_single_selection(data = raw_data_general, q.name = q99)
q99_bask <- get_single_selection(data = raw_data_bask, q.name = q99)
q99_botanist <- get_single_selection(data = raw_data_botanist, q.name = q99)
q99_hr <- get_single_selection(data = raw_data_hr, q.name = q99)
q99_all <- rbind(q99_general, q99_bask, q99_botanist, q99_hr) %>%
inner_join(ma_ids, by = "id")
q99_m_n <- length(unique(q99_all$id))
# Manipulate data into a graphable format
q99_plot <-
q99_all %>%
group_by(response.x) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / q99_m_n)
# Plot with percents and response counts
r <-
ggplot(q99_plot, aes(x = reorder(response.x, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
