library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
Q20 <- 'What.types.of.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face...Please.select.all.that.apply.'
Q20_final_response <- "X.136"
Q20_general <- get_choose_all(raw_data_general, q.name = Q20, f.response = Q20_final_response)
Q20_bask <- get_choose_all(raw_data_bask, q.name = Q20, f.response = Q20_final_response)
Q20_botanist <- get_choose_all(raw_data_botanist, q.name = Q20, f.response = Q20_final_response)
Q20_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q20, f.response = Q20_final_response)
Q20_all <-
rbind(Q20_general, Q20_bask, Q20_botanist, Q20_healing_rose) %>%
## number of people who submitted response to Q
number_of_people <- length(unique(Q20_all$id))
Q20 <- 'What.types.of.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face...Please.select.all.that.apply.'
Q20_final_response <- "X.136"
Q20_general <- get_choose_all(raw_data_general, q.name = Q20, f.response = Q20_final_response)
Q20_bask <- get_choose_all(raw_data_bask, q.name = Q20, f.response = Q20_final_response)
Q20_botanist <- get_choose_all(raw_data_botanist, q.name = Q20, f.response = Q20_final_response)
Q20_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q20, f.response = Q20_final_response)
Q20_all <- rbind(Q20_general, Q20_bask, Q20_botanist, Q20_healing_rose)
## number of people who submitted response to Q
number_of_people <- length(unique(Q20_all$id))
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
View(Q20_Q88_all)
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
tidy_choose_all(Q20_Q88_all)
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
Q20_By_Age_Tidy <- tidy_choose_all(Q20_Q88_all)
View(Q20_By_Age_Tidy)
View(all_data)
View(Q20_Q88_all)
#Plot with percents and response counts
for_plot <-
Q20_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
#Plot with percents and response counts
for_plot <-
Q20_all %>%
group_by(id) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
#Plot with percents and response counts
for_plot <-
Q20_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
#Plot with percents and response counts
for_plot <-
Q20_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
for_plot <-
Q20_Q88_all %>%
group_by(response, chosen) %>%
summarize(count = n())
p <-
ggplot(for_plot, aes(x = chosen, y = count)) +
geom_bar(stat = 'identity') +
facet_wrap(~response, ncol = 20) +
coord_flip()
p
for_plot <-
Q20_Q88_all %>%
group_by(id, chosen) %>%
summarize(count = n())
p <-
ggplot(for_plot, aes(x = chosen, y = count)) +
geom_bar(stat = 'identity') +
facet_wrap(~response, ncol = 20) +
coord_flip()
p
View(Q20_Q88_all)
View(all_data)
View(Q20_Q88_all)
View(Q88_bask)
# Save Data
write.csv(Q20_Q88_all, 'Q20_Condition_Prescriptions_By_Age_152.305.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q99 (a single selection question) and combine
Q99 <- "I.would.choose.medical.cannabis.if.it.was.a.federally.legal.treatment.option."
Q99_general <- get_single_selection(data = raw_data_general, q.name = Q99)
Q99_bask <- get_single_selection(data = raw_data_bask, q.name = Q99)
Q99_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q99)
Q99_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q99)
Q99_all <- rbind(Q99_general, Q99_bask, Q99_botanist, Q99_healing_rose)
## Determine Question N
number_of_people <- length(unique(Q99_all$id))
for_plot <-
Q99_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
ggsave(filename = 'Vet_Q99_Fed_Legal_Cannabis.png', plot = r, device = 'png')
write.csv(for_plot, 'Vet_Q99_Fed_Legal_Cannabis_154.305.csv', row.names = FALSE)
write.csv(Q99_all, 'Vet_Q99_Fed_Legal_Cannabis_Responses_ID.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/occp_ma_text.csv", stringsAsFactors = FALSE)
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/occp_ma_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q10 (a choose all question) and combine
Q10 <- 'Are.you.actively.trying.to.reduce.your.prescription.medication.intake.using.cannabis..Please.select.all.that.apply.'
Q10_final_response <- "X.66"
Q10_general <- get_choose_all(raw_data_general, q.name = Q10, f.response = Q10_final_response)
## Determine Question N
number_of_people <- length(unique(Q10_general$id))
for_plot <-
Q10_general_clean %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Pull out all responses for Q10 (a choose all question) and combine
Q10 <- 'Are.you.actively.trying.to.reduce.your.prescription.medication.intake.using.cannabis..Please.select.all.that.apply.'
Q10_final_response <- "X.66"
Q10_general <- get_choose_all(raw_data_general, q.name = Q10, f.response = Q10_final_response)
## Determine Question N
number_of_people <- length(unique(Q10_general$id))
for_plot <-
Q10_general %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
for_plot <-
Q10_general %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
for_plot <-
Q10_general %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
for_plot <-
Q10_general %>%
group_by(id) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
r <-
ggplot(for_plot, aes(x = reorder(id, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
for_plot <-
Q10_general %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
for_plot <-
Q10_general %>%
group_by() %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
r <-
ggplot(for_plot, aes(x = reorder(id, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/occp_ma_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q10 (a choose all question) and combine
Q10 <- 'Are.you.actively.trying.to.reduce.your.prescription.medication.intake.using.cannabis..Please.select.all.that.apply.'
Q10_final_response <- "X.66"
Q10_general <- get_choose_all(raw_data_general, q.name = Q10, f.response = Q10_final_response)
## Determine Question N
number_of_people <- length(unique(Q10_general$id))
View(Q10_general)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/occp_ma_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q10 (a choose all question) and combine
Q10 <- 'Are.you.actively.trying.to.reduce.your.prescription.medication.intake.using.cannabis..Please.select.all.that.apply.'
Q10_final_response <- "X.66"
Q10_general <- get_choose_all(raw_data_general, q.name = Q10, f.response = Q10_final_response)
## Determine Question N
number_of_people <- length(unique(Q10_general$id))
Q10_all <- tidy_choose_all(Q10_general)
for_plot <-
Q10_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
ggsave(filename = 'Q10_OCCP_MA_Cannabis_Reduce_Prescription.png', plot = r, device = 'png')
write.csv(for_plot, 'Q10_OCCP_MA_Cannabis_Reduce_Prescription_900.900.csv', row.names = FALSE)
write.csv(Q10_general_clean, 'Q10_OCCP_MA_Responses_ID.csv', row.names = FALSE)
ggsave(filename = 'Q10_OCCP_MA_Cannabis_Reduce_Prescription.png', plot = r, device = 'png')
write.csv(for_plot, 'Q10_OCCP_MA_Cannabis_Reduce_Prescription_900.900.csv', row.names = FALSE)
write.csv(Q10_all, 'Q10_OCCP_MA_Responses_ID.csv', row.names = FALSE)
# Save Data
write.csv(Q20_Q88_all, 'Q20_Condition_Prescriptions_By_Age_152.305.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
Q88 <- "What.is.your.age..in.years.."
general <- get_single_selection(data = raw_data_general, q.name = Q88)
bask <- get_single_selection(data = raw_data_bask, q.name = Q88)
botanist <- get_single_selection(data = raw_data_botanist, q.name = Q88)
healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q88)
all_data <- rbind(general, bask, botanist, healing_rose)
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(response, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
r <-
ggplot(for_plot, aes(x = response, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
Q20 <- 'What.types.of.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face...Please.select.all.that.apply.'
Q20_final_response <- "X.136"
Q20_general <- get_choose_all(raw_data_general, q.name = Q20, f.response = Q20_final_response)
Q20_bask <- get_choose_all(raw_data_bask, q.name = Q20, f.response = Q20_final_response)
Q20_botanist <- get_choose_all(raw_data_botanist, q.name = Q20, f.response = Q20_final_response)
Q20_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q20, f.response = Q20_final_response)
Q20_all <- rbind(Q20_general, Q20_bask, Q20_botanist, Q20_healing_rose)
## number of people who submitted response to Q
number_of_people <- length(unique(Q20_all$id))
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
for_plot <-
Q20_Q88_all %>%
group_by(response, condition) %>%
summarize(count = n())
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
Q88 <- "What.is.your.age..in.years.."
general <- get_single_selection(data = raw_data_general, q.name = Q88)
bask <- get_single_selection(data = raw_data_bask, q.name = Q88)
botanist <- get_single_selection(data = raw_data_botanist, q.name = Q88)
healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q88)
all_data <- rbind(general, bask, botanist, healing_rose)
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(response, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
r <-
ggplot(for_plot, aes(x = response, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
Q20 <- 'What.types.of.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face...Please.select.all.that.apply.'
Q20_final_response <- "X.136"
Q20_general <- get_choose_all(raw_data_general, q.name = Q20, f.response = Q20_final_response)
Q20_bask <- get_choose_all(raw_data_bask, q.name = Q20, f.response = Q20_final_response)
Q20_botanist <- get_choose_all(raw_data_botanist, q.name = Q20, f.response = Q20_final_response)
Q20_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q20, f.response = Q20_final_response)
Q20_all <- rbind(Q20_general, Q20_bask, Q20_botanist, Q20_healing_rose)
## number of people who submitted response to Q
number_of_people <- length(unique(Q20_all$id))
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
for_plot <-
Q20_Q88_all %>%
group_by(response, condition) %>%
summarize(count = n())
for_plot <-
Q20_Q88_all %>%
group_by(response, range) %>%
summarize(count = n())
for_plot <-
Q20_Q88_all %>%
group_by(response, chosen) %>%
summarize(count = n())
for_plot <-
Q20_Q88_all %>%
group_by(response, id) %>%
summarize(count = n())
p <- ggplot(data = for_plot, aes(x = condition, y = count)) +
geom_bar(stat = 'identity') +
coord_flip() +
facet_wrap(~range)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'identity') +
coord_flip() +
facet_wrap(~range)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'identity') +
coord_flip() +
facet_wrap(~id)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'response') +
coord_flip() +
facet_wrap(~response)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'response') +
coord_flip() +
facet_wrap(~response)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'chosen') +
coord_flip() +
facet_wrap(~response)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'chosen') +
coord_flip() +
facet_wrap(~id)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'chosen') +
coord_flip() +
facet_wrap(~id)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'chosen') +
coord_flip() +
facet_wrap(~id)
p
p <- ggplot(data = for_plot, aes(x = id, y = count)) +
geom_bar(stat = 'chosen') +
coord_flip() +
facet_wrap(~id)
p
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
Q20 <- 'What.types.of.prescription.medications.are.you.currently.taking.for.the.health.conditions.and.symptoms.you.face...Please.select.all.that.apply.'
Q20_final_response <- "X.136"
Q20_general <- get_choose_all(raw_data_general, q.name = Q20, f.response = Q20_final_response)
Q20_bask <- get_choose_all(raw_data_bask, q.name = Q20, f.response = Q20_final_response)
Q20_botanist <- get_choose_all(raw_data_botanist, q.name = Q20, f.response = Q20_final_response)
Q20_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q20, f.response = Q20_final_response)
Q20_all <- rbind(Q20_general, Q20_bask, Q20_botanist, Q20_healing_rose)
## number of people who submitted response to Q
number_of_people <- length(unique(Q20_all$id))
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
# Pull information for only this question out of each survey
# - Rename columns
# - Drop first row (first row contained column names)
# - Add survey source as a variable
## General
Q88 <- "What.is.your.age..in.years.."
general <- get_single_selection(data = raw_data_general, q.name = Q88)
bask <- get_single_selection(data = raw_data_bask, q.name = Q88)
botanist <- get_single_selection(data = raw_data_botanist, q.name = Q88)
healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q88)
all_data <- rbind(general, bask, botanist, healing_rose)
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(response, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
r <-
ggplot(for_plot, aes(x = response, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
# Combine Q6_all and Q20_all into one dataframe To Combine Age
Q20_Q88_all <-
Q20_all %>%
inner_join(all_data, by = "id")
# Save Data
write.csv(Q20_Q88_all, 'Q20_Condition_Prescriptions_By_Age_152.305.csv', row.names = FALSE)
```{r, message = FALSE}
