library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
setwd("C:/Users/DJR52/Desktop/5.14.2019 Data/Q53 Cannabis Spending")
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
setwd("C:/Users/DJR52/OneDrive/c3rn_veteran")
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
Q53 <- "On.average..how.much.do.you.spend..in.US.dollars..on.consumable.cannabis.products.per.week."
# Pull out all responses for Q53 (a single selection question) and combine
Q53_general <- get_single_selection(data = raw_data_general, q.name = Q53)
Q53_bask <- get_single_selection(data = raw_data_bask, q.name = Q53)
Q53_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q53)
Q53_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q53)
all_data <- rbind(Q53_general, Q53_bask, Q53_botanist, Q53_healing_rose)
number_of_people_who_submitted_response_to_Q53 <- length(unique(all_data$id))
histogram_object <- hist(as.numeric(all_data$response))
histogram_object$breaks = c(0, 100, 200, 300, 400, 500, 600)
histogram_object$counts
plot(histogram_object)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
r <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90) %>%
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
View(raw_data_healing_rose)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
r <-
ggplot(for_plot, aes(x = range, y = count)) +
geom_bar(stat = 'identity') +
geom_text(aes(label= paste(round(percent_all,2), count, sep = "***")))
r
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
View(Q90_bask)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q6 (a single selection question) and combine
Q6 <- "Which.is.the.primary.health.condition.that.causes.you.the.most.distress...Please.select.one."
Q6_general <- get_single_selection(data = raw_data_general, q.name = Q6)
Q6_bask <- get_single_selection(data = raw_data_bask, q.name = Q6)
Q6_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q6)
Q6_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q6)
Q6_all <- rbind(Q6_general, Q6_bask, Q6_botanist, Q6_healing_rose)
## Determine Question N
number_of_people <- length(unique(Q6_all$id))
Q6_Chronic_Pain_ids_we_want <- Q6_all %>%
filter(response %in% c("Chronic pain"))
Q6_PTSD_ids_we_want <- Q6_all %>%
filter(response %in% c("Posttraumatic stress disorder (PTSD)"))
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
Q53 <- "On.average..how.much.do.you.spend..in.US.dollars..on.consumable.cannabis.products.per.week."
# Pull out all responses for Q53 (a single selection question) and combine
Q53_general <- get_single_selection(data = raw_data_general, q.name = Q53)
Q53_bask <- get_single_selection(data = raw_data_bask, q.name = Q53)
Q53_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q53)
Q53_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q53)
all_data <- rbind(Q53_general, Q53_bask, Q53_botanist, Q53_healing_rose)
number_of_people_who_submitted_response_to_Q53 <- length(unique(all_data$id))
Q53_responses_we_want <- all_data %>%
outer_join(Q6_PTSD_ids_we_want)
Q53_responses_we_want <- all_data %>%
outer_join(all_data, Q6_PTSD_ids_we_want)
Q53_responses_we_want <- outer_join(all_data, Q6_PTSD_ids_we_want)
Q53_responses_we_want <-
outer_join(all_data, Q6_PTSD_ids_we_want)
Q53_responses_we_want <- %>%
outer_join(all_data, Q6_PTSD_ids_we_want)
outer_join(all_data, Q6_PTSD_ids_we_want)
outer_join %>%
(all_data, Q6_PTSD_ids_we_want)
outer_join %>%
(all_data Q6_PTSD_ids_we_want)
outer_join
(all_data, Q6_PTSD_ids_we_want)
outer_join(all_data, Q6_PTSD_ids_we_want)
outer_join(all_data, Q6_PTSD_ids_we_want)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q6 (a single selection question) and combine
Q6 <- "Which.is.the.primary.health.condition.that.causes.you.the.most.distress...Please.select.one."
Q6_general <- get_single_selection(data = raw_data_general, q.name = Q6)
Q6_bask <- get_single_selection(data = raw_data_bask, q.name = Q6)
Q6_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q6)
Q6_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q6)
Q6_all <- rbind(Q6_general, Q6_bask, Q6_botanist, Q6_healing_rose)
## Determine Question N
number_of_people <- length(unique(Q6_all$id))
for_plot <-
Q6_all %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
# Plot with percents and response counts
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
ggsave(filename = 'Q6_Primary_Condition.png', plot = r, device = 'png')
write.csv(Q6_plot, 'Q6_Primary_Condition_232.277.csv', row.names = FALSE)
write.csv(Q6_all, 'Q6_Responses_ID.csv', row.names = FALSE)
ggsave(filename = 'Q6_Primary_Condition.png', plot = r, device = 'png')
write.csv(for_plot, 'Q6_Primary_Condition_232.277.csv', row.names = FALSE)
write.csv(Q6_all, 'Q6_Responses_ID.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q5 (a choose all question), combine, and turn
# into a tidy data format for further processing
Q5 <- 'Which.of.the.following.health.conditions.do.you.face.and.or.have.been.diagnosed.with...Please.select.all.that.apply.'
Q5_final_response <- "X.25"
Q5_general <- get_choose_all(raw_data_general, q.name = Q5, f.response = Q5_final_response)
Q5_bask <- get_choose_all(raw_data_bask, q.name = Q5, f.response = Q5_final_response)
Q5_botanist <- get_choose_all(raw_data_botanist, q.name = Q5, f.response = Q5_final_response)
Q5_healing_rose <- get_choose_all(raw_data_healing_rose, q.name = Q5, f.response = Q5_final_response)
Q5_all <-
rbind(Q5_general, Q5_bask, Q5_botanist) %>%
tidy_choose_all()
number_of_people <- length(unique(Q5_all$id))
for_plot <-
Q5_all %>%
group_by(chosen) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
r <-
ggplot(for_plot, aes(x = reorder(chosen, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded,2), count, sep = "***")))
r
ggsave(filename = 'Q5_Common_Conditions.png', plot = r, device = 'png')
write.csv(for_plot, 'Q5_Common_Conditions_138.167.csv', row.names = FALSE)
write.csv(Q5_all, 'Q5_Responses_ID.csv', row.names = FALSE)
ggsave(filename = 'Q5_Common_Conditions.png', plot = r, device = 'png')
write.csv(for_plot, 'Q5_Common_Conditions_228.277.csv', row.names = FALSE)
write.csv(Q5_all, 'Q5_Responses_ID.csv', row.names = FALSE)
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
Q33 <- "On.average..how.much.do.you.pay..in.US.dollars..for.your.medications.on.a.monthly.basis.out.of.pocket."
# Pull out all responses for Q33 (a single selection question) and combine
Q33_general <- get_single_selection(data = raw_data_general, q.name = Q33)
Q33_bask <- get_single_selection(data = raw_data_bask, q.name = Q33)
Q33_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q33)
Q33_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q33)
Q33_all <- rbind(Q33_general, Q33_bask, Q33_botanist)
histogram_object <- hist(as.numeric(Q33_all$response))
histogram_object$breaks = c(0, 200, 400, 600, 800, 1000, 1200, 1400)
histogram_object$counts
plot(histogram_object)
histogram_object <- hist(as.numeric(Q33_all$response))
histogram_object$breaks = c(0, 200, 400, 600, 800, 1000, 1200, 1400)
histogram_object$counts
plot(histogram_object)
write.csv(Q33_all, 'Q33_Responses_ID.csv', row.names = FALSE)
write.csv(Q33_all, 'Q33_Responses_ID.csv', row.names = FALSE)
View(Q33_all)
Q33 <- "On.average..how.much.do.you.pay..in.US.dollars..for.your.medications.on.a.monthly.basis.out.of.pocket."
# Pull out all responses for Q33 (a single selection question) and combine
Q33_general <- get_single_selection(data = raw_data_general, q.name = Q33)
Q33_bask <- get_single_selection(data = raw_data_bask, q.name = Q33)
Q33_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q33)
Q33_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q33)
Q33_all <- rbind(Q33_general, Q33_bask, Q33_botanist, Q33_healing_rose)
histogram_object <- hist(as.numeric(Q33_all$response))
histogram_object$breaks = c(0, 200, 400, 600, 800, 1000, 1200, 1400)
histogram_object$counts
plot(histogram_object)
Q33 <- "On.average..how.much.do.you.pay..in.US.dollars..for.your.medications.on.a.monthly.basis.out.of.pocket."
# Pull out all responses for Q33 (a single selection question) and combine
Q33_general <- get_single_selection(data = raw_data_general, q.name = Q33)
Q33_bask <- get_single_selection(data = raw_data_bask, q.name = Q33)
Q33_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q33)
Q33_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q33)
all_data <- rbind(Q33_general, Q33_bask, Q33_botanist, Q33_healing_rose)
number_of_people_who_submitted_response_to_Q53 <- length(unique(all_data$id))
histogram_object <- hist(as.numeric(Q33_all$response))
histogram_object$breaks = c(0, 200, 400, 600, 800, 1000, 1200, 1400)
histogram_object$counts
plot(histogram_object)
ggsave(filename = 'Q33_Spend_Medication.png', plot = r, device = 'png')
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
ggsave(filename = 'Q33_Spend_Medication.png', plot = histogram_object, device = 'png')
ggsave(filename = 'Q33_Spend_Medication.png', plot = hist, device = 'png')
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
# Plot with percents and response counts
for_plot <-
all_data %>%
group_by(range, ) %>%
summarize(count = n()) %>%
ungroup() %>%
mutate(percent_all = count / sum(count))
library(tidyverse)
library(ggplot2)
library(stringr)
source("helper.R")
# Read in raw data. These are the files downloaded from survey monkey saved as a .csv
raw_data_general <- read.csv("data/general_text.csv", stringsAsFactors = FALSE)
raw_data_botanist <- read.csv("data/botanist_text.csv", stringsAsFactors = FALSE)
raw_data_bask <- read.csv("data/bask_text.csv", stringsAsFactors = FALSE)
raw_data_healing_rose <- read.csv("data/healing_rose_text.csv", stringsAsFactors = FALSE)
# Pull out all responses for Q90 (a single selection question) and combine
Q90 <- "What.is.your.annual.household.income..in.US.dollars."
Q90_general <- get_single_selection(data = raw_data_general, q.name = Q90)
Q90_bask <- get_single_selection(data = raw_data_bask, q.name = Q90)
Q90_botanist <- get_single_selection(data = raw_data_botanist, q.name = Q90)
Q90_healing_rose <- get_single_selection(data = raw_data_healing_rose, q.name = Q90)
all_data <- rbind(Q90_general, Q90_bask, Q90_botanist, Q90_healing_rose)
number_of_people_who_submitted_response_to_Q90 <- length(unique(all_data$id))
for_plot <-
all_data %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people)
for_plot <-
all_data %>%
group_by(response) %>%
summarize(count = n()) %>%
mutate(percent_all = count / sum(count)) %>%
mutate(percent_responded = count / number_of_people_who_submitted_response_to_Q90)
# Plot with percents and response counts
r <-
ggplot(for_plot, aes(x = reorder(response, count), y = percent_responded)) +
geom_bar(stat = 'identity') +
coord_flip() +
geom_text(aes(label= paste(round(percent_responded, 2), count, sep = "***")))
r
